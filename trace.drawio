<mxfile host="www.draw.io" modified="2020-01-13T08:45:12.981Z" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/79.0.3945.117 Safari/537.36" etag="J2E1XC_rl4nOHoJ4awz2" version="12.5.1" type="github">
  <diagram id="-fwhPAeI0vTTsdXvRMv6" name="第 1 页">
    <mxGraphModel dx="2493" dy="713" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>
        <mxCell id="Nz7b2B-T4ap1JmuyuAuI-36" value="YzServiceExecutor" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="120" y="120" width="110" height="630" as="geometry"/>
        </mxCell>
        <mxCell id="Nz7b2B-T4ap1JmuyuAuI-37" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="Nz7b2B-T4ap1JmuyuAuI-36" vertex="1">
          <mxGeometry x="50" y="70" width="10" height="80" as="geometry"/>
        </mxCell>
        <mxCell id="Nz7b2B-T4ap1JmuyuAuI-74" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="Nz7b2B-T4ap1JmuyuAuI-36" vertex="1">
          <mxGeometry x="50" y="370.25" width="10" height="80" as="geometry"/>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-1" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="Nz7b2B-T4ap1JmuyuAuI-36" vertex="1">
          <mxGeometry x="50" y="200" width="10" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-2" value="_execLocal" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="Nz7b2B-T4ap1JmuyuAuI-36" target="Y-8gsAqGTMaJMT4dQ_MY-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="55" y="180" as="sourcePoint"/>
            <Array as="points">
              <mxPoint x="80" y="180"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-3" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="Nz7b2B-T4ap1JmuyuAuI-36" vertex="1">
          <mxGeometry x="50" y="280" width="10" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-4" value="_execRemote" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="Nz7b2B-T4ap1JmuyuAuI-36" target="Y-8gsAqGTMaJMT4dQ_MY-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="55" y="260" as="sourcePoint"/>
            <Array as="points">
              <mxPoint x="80" y="260"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Nz7b2B-T4ap1JmuyuAuI-39" value="TraceInvokeFilter" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="300" y="120" width="100" height="620" as="geometry"/>
        </mxCell>
        <mxCell id="Nz7b2B-T4ap1JmuyuAuI-53" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="Nz7b2B-T4ap1JmuyuAuI-39" vertex="1">
          <mxGeometry x="45" y="100" width="10" height="80" as="geometry"/>
        </mxCell>
        <mxCell id="Nz7b2B-T4ap1JmuyuAuI-57" value="&lt;font style=&quot;font-size: 6px&quot;&gt;TraceTransfer.getTrace&lt;br&gt;(YzServiceInfo.getAppName())&lt;/font&gt;" style="html=1;verticalAlign=bottom;startArrow=oval;startFill=1;endArrow=block;startSize=8;" parent="Nz7b2B-T4ap1JmuyuAuI-39" target="Nz7b2B-T4ap1JmuyuAuI-55" edge="1">
          <mxGeometry width="60" relative="1" as="geometry">
            <mxPoint x="50" y="120" as="sourcePoint"/>
            <mxPoint x="150" y="120" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="Nz7b2B-T4ap1JmuyuAuI-64" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="Nz7b2B-T4ap1JmuyuAuI-39" vertex="1">
          <mxGeometry x="45" y="370.65" width="10" height="129.6" as="geometry"/>
        </mxCell>
        <mxCell id="Nz7b2B-T4ap1JmuyuAuI-55" value="TraceTransfer" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="500" y="120" width="100" height="600" as="geometry"/>
        </mxCell>
        <mxCell id="Nz7b2B-T4ap1JmuyuAuI-59" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="Nz7b2B-T4ap1JmuyuAuI-55" vertex="1">
          <mxGeometry x="45" y="120" width="10" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="Nz7b2B-T4ap1JmuyuAuI-65" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="Nz7b2B-T4ap1JmuyuAuI-55" vertex="1">
          <mxGeometry x="45" y="370.65" width="10" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="Nz7b2B-T4ap1JmuyuAuI-78" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="Nz7b2B-T4ap1JmuyuAuI-55" vertex="1">
          <mxGeometry x="45" y="450.25" width="10" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="Nz7b2B-T4ap1JmuyuAuI-82" value="sendTace" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0.023;entryDx=0;entryDy=0;entryPerimeter=0;" parent="Nz7b2B-T4ap1JmuyuAuI-55" target="Nz7b2B-T4ap1JmuyuAuI-83" edge="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="50" y="382.25" as="sourcePoint"/>
            <mxPoint x="140" y="380.25" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="Nz7b2B-T4ap1JmuyuAuI-67" value="return TraceTransfer" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;" parent="1" source="Nz7b2B-T4ap1JmuyuAuI-65" target="Nz7b2B-T4ap1JmuyuAuI-64" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="415" y="566.65" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="Nz7b2B-T4ap1JmuyuAuI-66" value="TraceTransfer.getTrace()" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;exitX=0.743;exitY=-0.005;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="Nz7b2B-T4ap1JmuyuAuI-64" target="Nz7b2B-T4ap1JmuyuAuI-65" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="190" y="490.65" as="sourcePoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="Nz7b2B-T4ap1JmuyuAuI-69" value="ProxyController" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="-30" y="120" width="120" height="630" as="geometry"/>
        </mxCell>
        <mxCell id="Nz7b2B-T4ap1JmuyuAuI-70" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="Nz7b2B-T4ap1JmuyuAuI-69" vertex="1">
          <mxGeometry x="55" y="70" width="10" height="80" as="geometry"/>
        </mxCell>
        <mxCell id="Nz7b2B-T4ap1JmuyuAuI-68" value="preExecute" style="html=1;verticalAlign=bottom;endArrow=block;entryX=-0.043;entryY=0.004;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="Nz7b2B-T4ap1JmuyuAuI-37" target="Nz7b2B-T4ap1JmuyuAuI-53" edge="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="190" y="220" as="sourcePoint"/>
            <mxPoint x="250" y="220" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="Nz7b2B-T4ap1JmuyuAuI-73" value="execute" style="html=1;verticalAlign=bottom;endArrow=block;exitX=1;exitY=-0.012;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="Nz7b2B-T4ap1JmuyuAuI-70" edge="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="30" y="210" as="sourcePoint"/>
            <mxPoint x="170" y="190" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="Nz7b2B-T4ap1JmuyuAuI-76" value="postExecute" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;exitX=0.917;exitY=0.002;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="Nz7b2B-T4ap1JmuyuAuI-74" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="275" y="490.25" as="sourcePoint"/>
            <mxPoint x="345" y="490.25" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="Nz7b2B-T4ap1JmuyuAuI-79" value="getTrace().remove()" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;exitX=1.167;exitY=0.615;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="Nz7b2B-T4ap1JmuyuAuI-64" target="Nz7b2B-T4ap1JmuyuAuI-78" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="475" y="570.25" as="sourcePoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="Nz7b2B-T4ap1JmuyuAuI-81" value="TraceSender" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="650" y="120" width="100" height="600" as="geometry"/>
        </mxCell>
        <mxCell id="Nz7b2B-T4ap1JmuyuAuI-83" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="Nz7b2B-T4ap1JmuyuAuI-81" vertex="1">
          <mxGeometry x="45" y="380.25" width="10" height="120" as="geometry"/>
        </mxCell>
        <mxCell id="Nz7b2B-T4ap1JmuyuAuI-84" value="Event" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="790" y="120" width="100" height="600" as="geometry"/>
        </mxCell>
        <mxCell id="Nz7b2B-T4ap1JmuyuAuI-85" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="Nz7b2B-T4ap1JmuyuAuI-84" vertex="1">
          <mxGeometry x="45" y="395.25" width="10" height="80" as="geometry"/>
        </mxCell>
        <mxCell id="Nz7b2B-T4ap1JmuyuAuI-86" value="new" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;" parent="Nz7b2B-T4ap1JmuyuAuI-84" target="Nz7b2B-T4ap1JmuyuAuI-85" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-80" y="395.25" as="sourcePoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="Nz7b2B-T4ap1JmuyuAuI-87" value="return Event" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;entryX=1.167;entryY=0.744;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="Nz7b2B-T4ap1JmuyuAuI-85" target="Nz7b2B-T4ap1JmuyuAuI-83" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="765" y="591.25" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="Nz7b2B-T4ap1JmuyuAuI-88" value="MQProducer&lt;br&gt;(kafka)" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="950" y="120" width="100" height="610" as="geometry"/>
        </mxCell>
        <mxCell id="Nz7b2B-T4ap1JmuyuAuI-89" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="Nz7b2B-T4ap1JmuyuAuI-88" vertex="1">
          <mxGeometry x="45" y="504.58" width="10" height="55.42" as="geometry"/>
        </mxCell>
        <mxCell id="Nz7b2B-T4ap1JmuyuAuI-91" value="send" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0.083;entryY=-0.019;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" target="Nz7b2B-T4ap1JmuyuAuI-89" edge="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="700" y="620.25" as="sourcePoint"/>
            <mxPoint x="990" y="620.25" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-5" value="&lt;h1&gt;Proxy 调用链路&lt;/h1&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-320" y="120" width="190" height="120" as="geometry"/>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-7" value="&lt;h1&gt;资源服务 消耗记录&lt;/h1&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-260" y="1090" width="210" height="120" as="geometry"/>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-8" value="RedisExecute" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="150" y="1160" width="100" height="280" as="geometry"/>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-14" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="Y-8gsAqGTMaJMT4dQ_MY-8" vertex="1">
          <mxGeometry x="45" y="90" width="10" height="130" as="geometry"/>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-15" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="Y-8gsAqGTMaJMT4dQ_MY-8" vertex="1">
          <mxGeometry x="45" y="140.28" width="10" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-16" value="action" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="Y-8gsAqGTMaJMT4dQ_MY-8" target="Y-8gsAqGTMaJMT4dQ_MY-15" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="50" y="120.28" as="sourcePoint"/>
            <Array as="points">
              <mxPoint x="75" y="120.28"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-9" value="RedisService" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry y="1090" width="100" height="300" as="geometry"/>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-10" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="Y-8gsAqGTMaJMT4dQ_MY-9" vertex="1">
          <mxGeometry x="45" y="70" width="10" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-11" value="new" style="html=1;verticalAlign=bottom;endArrow=block;" parent="Y-8gsAqGTMaJMT4dQ_MY-9" edge="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="50" y="70" as="sourcePoint"/>
            <mxPoint x="150" y="70" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-12" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="Y-8gsAqGTMaJMT4dQ_MY-9" vertex="1">
          <mxGeometry x="45" y="160" width="10" height="70" as="geometry"/>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-13" value="execute" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0.741;entryY=0.001;entryDx=0;entryDy=0;entryPerimeter=0;" parent="Y-8gsAqGTMaJMT4dQ_MY-9" target="Y-8gsAqGTMaJMT4dQ_MY-14" edge="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="50" y="160" as="sourcePoint"/>
            <mxPoint x="190" y="160" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-17" value="&lt;h1&gt;domain Event and Trace&lt;/h1&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-220" y="2470" width="210" height="120" as="geometry"/>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-18" value="DomainExecEngine" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="220" y="2450" width="115" height="310" as="geometry"/>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-19" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="Y-8gsAqGTMaJMT4dQ_MY-18" vertex="1">
          <mxGeometry x="55" y="100" width="10" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-20" value="executeCmds" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="Y-8gsAqGTMaJMT4dQ_MY-18" target="Y-8gsAqGTMaJMT4dQ_MY-19" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="60" y="80" as="sourcePoint"/>
            <Array as="points">
              <mxPoint x="85" y="80"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-22" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="Y-8gsAqGTMaJMT4dQ_MY-18" vertex="1">
          <mxGeometry x="55" y="170" width="10" height="70" as="geometry"/>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-26" value="new" style="html=1;verticalAlign=bottom;endArrow=block;" parent="Y-8gsAqGTMaJMT4dQ_MY-18" edge="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="63" y="170" as="sourcePoint"/>
            <mxPoint x="333" y="170" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-21" value="RedisService" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="423" y="2450" width="100" height="480" as="geometry"/>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-24" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="Y-8gsAqGTMaJMT4dQ_MY-21" vertex="1">
          <mxGeometry x="45" y="220" width="10" height="80" as="geometry"/>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-27" value="innerExecute" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0.138;entryY=0.009;entryDx=0;entryDy=0;entryPerimeter=0;" parent="Y-8gsAqGTMaJMT4dQ_MY-21" target="Y-8gsAqGTMaJMT4dQ_MY-28" edge="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="50" y="240" as="sourcePoint"/>
            <mxPoint x="130" y="240" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-34" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="Y-8gsAqGTMaJMT4dQ_MY-21" vertex="1">
          <mxGeometry x="45" y="389.93" width="10" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-35" value="postExecStepCmds" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="Y-8gsAqGTMaJMT4dQ_MY-21" target="Y-8gsAqGTMaJMT4dQ_MY-34" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="50" y="369.93" as="sourcePoint"/>
            <Array as="points">
              <mxPoint x="75" y="369.93"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-36" value="callSuccess" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0.207;entryY=0.001;entryDx=0;entryDy=0;entryPerimeter=0;" parent="Y-8gsAqGTMaJMT4dQ_MY-21" target="Y-8gsAqGTMaJMT4dQ_MY-37" edge="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="50" y="420" as="sourcePoint"/>
            <mxPoint x="130" y="420" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-25" value="RedisTransactionDomainExecutor" style="html=1;points=[];perimeter=orthogonalPerimeter;shape=umlLifeline;participant=label;fontFamily=Helvetica;fontSize=12;fontColor=#000000;align=center;strokeColor=#000000;fillColor=#ffffff;recursiveResize=0;container=1;collapsible=0;" parent="1" vertex="1">
          <mxGeometry x="553" y="2620" width="190" height="570" as="geometry"/>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-28" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="Y-8gsAqGTMaJMT4dQ_MY-25" vertex="1">
          <mxGeometry x="90" y="70" width="10" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-29" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="Y-8gsAqGTMaJMT4dQ_MY-25" vertex="1">
          <mxGeometry x="90" y="159.93" width="10" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-30" value="execute" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="Y-8gsAqGTMaJMT4dQ_MY-25" target="Y-8gsAqGTMaJMT4dQ_MY-29" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="95" y="139.93" as="sourcePoint"/>
            <Array as="points">
              <mxPoint x="120" y="139.93"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-33" value="execDomainCmd" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0.224;entryY=0.009;entryDx=0;entryDy=0;entryPerimeter=0;" parent="Y-8gsAqGTMaJMT4dQ_MY-25" target="Y-8gsAqGTMaJMT4dQ_MY-32" edge="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="100" y="183" as="sourcePoint"/>
            <mxPoint x="180" y="183" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-37" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="Y-8gsAqGTMaJMT4dQ_MY-25" vertex="1">
          <mxGeometry x="90" y="250" width="10" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-38" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="Y-8gsAqGTMaJMT4dQ_MY-25" vertex="1">
          <mxGeometry x="90" y="340" width="10" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-39" value="handlerResult" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="Y-8gsAqGTMaJMT4dQ_MY-25" target="Y-8gsAqGTMaJMT4dQ_MY-38" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="95" y="320" as="sourcePoint"/>
            <Array as="points">
              <mxPoint x="120" y="320"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-40" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="Y-8gsAqGTMaJMT4dQ_MY-25" vertex="1">
          <mxGeometry x="90" y="420" width="10" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-41" value="sendConsumerTopic" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="Y-8gsAqGTMaJMT4dQ_MY-25" target="Y-8gsAqGTMaJMT4dQ_MY-40" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="95" y="400" as="sourcePoint"/>
            <Array as="points">
              <mxPoint x="120" y="400"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-42" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="Y-8gsAqGTMaJMT4dQ_MY-25" vertex="1">
          <mxGeometry x="90" y="510" width="10" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-43" value="sendEventSource" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="Y-8gsAqGTMaJMT4dQ_MY-25" target="Y-8gsAqGTMaJMT4dQ_MY-42" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="95" y="490" as="sourcePoint"/>
            <Array as="points">
              <mxPoint x="120" y="490"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-45" value="send" style="html=1;verticalAlign=bottom;endArrow=block;" parent="Y-8gsAqGTMaJMT4dQ_MY-25" target="Y-8gsAqGTMaJMT4dQ_MY-44" edge="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="100" y="530" as="sourcePoint"/>
            <mxPoint x="180" y="530" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-23" value="doExecWithOutTranscation&lt;br&gt;execStepCmds" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0.19;entryY=-0.003;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" edge="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="285.0000000000002" y="2668.76" as="sourcePoint"/>
            <mxPoint x="469.9000000000001" y="2668.76" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-31" value="DomainExecutor" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="773" y="2450" width="100" height="490" as="geometry"/>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-32" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="Y-8gsAqGTMaJMT4dQ_MY-31" vertex="1">
          <mxGeometry x="45" y="353" width="10" height="80" as="geometry"/>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-44" value="MQProducer" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="919.55" y="2450" width="100" height="1220" as="geometry"/>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-46" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="Y-8gsAqGTMaJMT4dQ_MY-44" vertex="1">
          <mxGeometry x="45" y="700" width="10" height="210" as="geometry"/>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-47" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="Y-8gsAqGTMaJMT4dQ_MY-44" vertex="1">
          <mxGeometry x="45.00000000000004" y="830" width="10" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-48" value="sendRecord" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="Y-8gsAqGTMaJMT4dQ_MY-44" target="Y-8gsAqGTMaJMT4dQ_MY-47" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="50.00000000000004" y="810" as="sourcePoint"/>
            <Array as="points">
              <mxPoint x="75.00000000000004" y="810"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-55" value="addAnnotation(埋点)" style="html=1;verticalAlign=bottom;endArrow=block;" parent="Y-8gsAqGTMaJMT4dQ_MY-44" target="Y-8gsAqGTMaJMT4dQ_MY-54" edge="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="54.55000000000004" y="860" as="sourcePoint"/>
            <mxPoint x="134.55000000000007" y="860" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-57" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="Y-8gsAqGTMaJMT4dQ_MY-44" vertex="1">
          <mxGeometry x="45.450000000000045" y="750" width="10" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-58" value="kafkaProducer.send(record)" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="Y-8gsAqGTMaJMT4dQ_MY-44" target="Y-8gsAqGTMaJMT4dQ_MY-57" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="50.450000000000045" y="730" as="sourcePoint"/>
            <Array as="points">
              <mxPoint x="75.45000000000005" y="730"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-69" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="Y-8gsAqGTMaJMT4dQ_MY-44" vertex="1">
          <mxGeometry x="45.00000000000004" y="1070" width="10" height="80" as="geometry"/>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-59" value="TraceBmsFilter" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="-10" y="2450" width="100" height="1160" as="geometry"/>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-61" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="Y-8gsAqGTMaJMT4dQ_MY-59" vertex="1">
          <mxGeometry x="45" y="109" width="10" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-62" value="preExecute" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="Y-8gsAqGTMaJMT4dQ_MY-59" target="Y-8gsAqGTMaJMT4dQ_MY-61" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="45" y="89" as="sourcePoint"/>
            <Array as="points">
              <mxPoint x="70" y="89"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-64" value="new" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" parent="Y-8gsAqGTMaJMT4dQ_MY-59" target="Y-8gsAqGTMaJMT4dQ_MY-63" edge="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="50" y="130" as="sourcePoint"/>
            <mxPoint x="110" y="120" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-65" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="Y-8gsAqGTMaJMT4dQ_MY-59" vertex="1">
          <mxGeometry x="45" y="1000" width="10" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-66" value="postExecute" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" parent="Y-8gsAqGTMaJMT4dQ_MY-59" target="Y-8gsAqGTMaJMT4dQ_MY-65" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="50" y="980" as="sourcePoint"/>
            <Array as="points">
              <mxPoint x="75" y="980"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-67" value="sendTrace" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0.083;entryY=-0.008;entryDx=0;entryDy=0;entryPerimeter=0;" parent="Y-8gsAqGTMaJMT4dQ_MY-59" target="Y-8gsAqGTMaJMT4dQ_MY-68" edge="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="50" y="1030" as="sourcePoint"/>
            <mxPoint x="160" y="1030" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-63" value="TraceTransfer" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" parent="1" vertex="1">
          <mxGeometry x="110" y="2580" width="100" height="1030" as="geometry"/>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-54" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="Y-8gsAqGTMaJMT4dQ_MY-63" vertex="1">
          <mxGeometry x="45" y="730" width="10" height="80" as="geometry"/>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-68" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" parent="Y-8gsAqGTMaJMT4dQ_MY-63" vertex="1">
          <mxGeometry x="45" y="900" width="10" height="80" as="geometry"/>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-70" value="send" style="html=1;verticalAlign=bottom;endArrow=block;entryX=0.212;entryY=0.002;entryDx=0;entryDy=0;entryPerimeter=0;" parent="Y-8gsAqGTMaJMT4dQ_MY-63" target="Y-8gsAqGTMaJMT4dQ_MY-69" edge="1">
          <mxGeometry width="80" relative="1" as="geometry">
            <mxPoint x="50" y="940" as="sourcePoint"/>
            <mxPoint x="850" y="940" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="Y-8gsAqGTMaJMT4dQ_MY-71" value="BMS 事例" style="html=1;" parent="1" vertex="1">
          <mxGeometry x="-10" y="2380" width="225" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="sLyhNjWvWMigtgxr2YFj-1" value="redis" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="5" y="1020" width="265" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="sLyhNjWvWMigtgxr2YFj-10" value="MQProducer" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;" vertex="1" parent="1">
          <mxGeometry x="423" y="1080" width="100" height="400" as="geometry"/>
        </mxCell>
        <mxCell id="sLyhNjWvWMigtgxr2YFj-18" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" vertex="1" parent="sLyhNjWvWMigtgxr2YFj-10">
          <mxGeometry x="45" y="98" width="10" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="sLyhNjWvWMigtgxr2YFj-19" value="init 构建kafkaProducer实例" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" edge="1" target="sLyhNjWvWMigtgxr2YFj-18" parent="sLyhNjWvWMigtgxr2YFj-10">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="50" y="78" as="sourcePoint"/>
            <Array as="points">
              <mxPoint x="75" y="78"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="sLyhNjWvWMigtgxr2YFj-20" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" vertex="1" parent="sLyhNjWvWMigtgxr2YFj-10">
          <mxGeometry x="45" y="190.09" width="10" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="sLyhNjWvWMigtgxr2YFj-21" value="send" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" edge="1" target="sLyhNjWvWMigtgxr2YFj-20" parent="sLyhNjWvWMigtgxr2YFj-10">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="50" y="170.09" as="sourcePoint"/>
            <Array as="points">
              <mxPoint x="75" y="170.09"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="sLyhNjWvWMigtgxr2YFj-22" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;" vertex="1" parent="sLyhNjWvWMigtgxr2YFj-10">
          <mxGeometry x="45" y="299.59" width="10" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="sLyhNjWvWMigtgxr2YFj-23" value="sendRecord，设置anot" style="edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;" edge="1" target="sLyhNjWvWMigtgxr2YFj-22" parent="sLyhNjWvWMigtgxr2YFj-10">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="50" y="279.59" as="sourcePoint"/>
            <Array as="points">
              <mxPoint x="75" y="279.59"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="sLyhNjWvWMigtgxr2YFj-28" value="TraceSpan&#xa;(方法调用块，记录链路是调用了哪些方法)" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=43;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;" vertex="1" parent="1">
          <mxGeometry x="22.5" y="3990" width="510" height="190" as="geometry"/>
        </mxCell>
        <mxCell id="sLyhNjWvWMigtgxr2YFj-29" value="+ tid：String 全局唯一id，标识span" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="sLyhNjWvWMigtgxr2YFj-28">
          <mxGeometry y="43" width="510" height="26" as="geometry"/>
        </mxCell>
        <mxCell id="sLyhNjWvWMigtgxr2YFj-37" value="+ traceId：String 唯一id，标识当前TraceSpan归属哪个TraceTransfer" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="sLyhNjWvWMigtgxr2YFj-28">
          <mxGeometry y="69" width="510" height="26" as="geometry"/>
        </mxCell>
        <mxCell id="sLyhNjWvWMigtgxr2YFj-38" value="+ pId：String 上一级TraceSpan在tid" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="sLyhNjWvWMigtgxr2YFj-28">
          <mxGeometry y="95" width="510" height="26" as="geometry"/>
        </mxCell>
        <mxCell id="sLyhNjWvWMigtgxr2YFj-30" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" vertex="1" parent="sLyhNjWvWMigtgxr2YFj-28">
          <mxGeometry y="121" width="510" height="8" as="geometry"/>
        </mxCell>
        <mxCell id="sLyhNjWvWMigtgxr2YFj-31" value="+ addTraceAnnotation(TraceAnnotation traceAnnotation) 增加资源监控" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="sLyhNjWvWMigtgxr2YFj-28">
          <mxGeometry y="129" width="510" height="61" as="geometry"/>
        </mxCell>
        <mxCell id="sLyhNjWvWMigtgxr2YFj-32" value="TraceTransfer&#xa;（链路追踪基本元素，整个链路中调用过程唯一的单例对象）" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=43;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;" vertex="1" parent="1">
          <mxGeometry x="22.5" y="3800" width="507.5" height="150" as="geometry"/>
        </mxCell>
        <mxCell id="sLyhNjWvWMigtgxr2YFj-33" value="+ currentSpan : TraceSpan 当前调用的方法" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="sLyhNjWvWMigtgxr2YFj-32">
          <mxGeometry y="43" width="507.5" height="26" as="geometry"/>
        </mxCell>
        <mxCell id="sLyhNjWvWMigtgxr2YFj-36" value="+ traceId: String 唯一标识" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="sLyhNjWvWMigtgxr2YFj-32">
          <mxGeometry y="69" width="507.5" height="26" as="geometry"/>
        </mxCell>
        <mxCell id="sLyhNjWvWMigtgxr2YFj-34" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;" vertex="1" parent="sLyhNjWvWMigtgxr2YFj-32">
          <mxGeometry y="95" width="507.5" height="8" as="geometry"/>
        </mxCell>
        <mxCell id="sLyhNjWvWMigtgxr2YFj-35" value="+ getTraceSpan(String applicationName, String methodName, String host) :  TraceSpan &#xa;创建新的TraceSpan" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="sLyhNjWvWMigtgxr2YFj-32">
          <mxGeometry y="103" width="507.5" height="47" as="geometry"/>
        </mxCell>
        <mxCell id="sLyhNjWvWMigtgxr2YFj-39" value="TraceAnnotation&#xa;(资源监控，主要记录当前链路中对于第三方资源调用使用情况)&#xa;" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=56;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;" vertex="1" parent="1">
          <mxGeometry x="27.5" y="4220" width="505" height="238" as="geometry"/>
        </mxCell>
        <mxCell id="sLyhNjWvWMigtgxr2YFj-40" value="+ spanId : String TraceSpan 调用块id" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="sLyhNjWvWMigtgxr2YFj-39">
          <mxGeometry y="56" width="505" height="26" as="geometry"/>
        </mxCell>
        <mxCell id="sLyhNjWvWMigtgxr2YFj-43" value="+ traceId : String TraceTransfer 调用链路id" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="sLyhNjWvWMigtgxr2YFj-39">
          <mxGeometry y="82" width="505" height="26" as="geometry"/>
        </mxCell>
        <mxCell id="sLyhNjWvWMigtgxr2YFj-44" value="+ resourceType : String 资源类型" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="sLyhNjWvWMigtgxr2YFj-39">
          <mxGeometry y="108" width="505" height="26" as="geometry"/>
        </mxCell>
        <mxCell id="sLyhNjWvWMigtgxr2YFj-45" value="+ resourceURI : String 资源地址" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="sLyhNjWvWMigtgxr2YFj-39">
          <mxGeometry y="134" width="505" height="26" as="geometry"/>
        </mxCell>
        <mxCell id="sLyhNjWvWMigtgxr2YFj-46" value="+ destination : long 耗时" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="sLyhNjWvWMigtgxr2YFj-39">
          <mxGeometry y="160" width="505" height="26" as="geometry"/>
        </mxCell>
        <mxCell id="sLyhNjWvWMigtgxr2YFj-47" value="+ date : Date 调用时间" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="sLyhNjWvWMigtgxr2YFj-39">
          <mxGeometry y="186" width="505" height="26" as="geometry"/>
        </mxCell>
        <mxCell id="sLyhNjWvWMigtgxr2YFj-48" value="+ operation : String 调用参数" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" vertex="1" parent="sLyhNjWvWMigtgxr2YFj-39">
          <mxGeometry y="212" width="505" height="26" as="geometry"/>
        </mxCell>
        <mxCell id="sLyhNjWvWMigtgxr2YFj-49" value="&lt;h1&gt;Tracetransfer 链路追踪的基本元素分析&lt;/h1&gt;&lt;p&gt;在请求进入系统的时候，就会创建一个当前线程特有的TraceTransfer实例，当前实例traceId是唯一的，同时创建了TraceSpan，currentSpan就是调用的主方法。链路调用过程中，可能会调用到多个方法，TraceSpan可能会存在多个（TraceSpan类似链表的方式，pid指向上一级的TraceSpan的主键tid）。在使用到第三方资源的时候，通过TranSpan中增加Annotation来记录，这里就包含了对mysql\redis\kafka\RedisCache\oss\第三方http调用的记录。&lt;/p&gt;&lt;p&gt;TranSpan主要记录调用方法，正常是进入系统的方法，比如接口，如果中间涉及到RPC调用也会进行记录，还有特定需要进行跟踪的方法（使用的是YzTrace注解标识的方法，这里用的是切面的方式实现的）&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="-470" y="3800" width="450" height="250" as="geometry"/>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
